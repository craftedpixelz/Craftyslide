/*
* Craftyslide
* Created by: Abid Din - http://craftedpixelz.co.uk
* This adaptation by Cole Panike - https://github.com/colepanike
* Version: 1.2
* Copyright: Crafted Pixelz
* License: MIT license
* Updated: 6th Feb 2014
*/

(function(e){e.fn.craftyslide=function(t){var n={width:600,height:300,pagination:true,fadetime:350,delay:5e3};var t=e.extend(n,t);return this.each(function(){function s(){n.append("<ol id='pagination' />");var t=1;r.each(function(){e(this).attr("id","slide"+t);e("#pagination").append("<li><a href='#slide"+t+"'>"+t+"</a></li>");t++});e("#pagination li a:first").addClass("active")}function o(){r.each(function(){$caption=e(this).find("img").attr("title");if($caption!==undefined){e(this).prepend("<p class='caption'>"+$caption+"</p>")}r.filter(":first").find(".caption").css("bottom",0)})}function u(){var n=e("#pagination li a");n.click(function(s){s.preventDefault();clearTimeout(i);f();var o=e(this.hash);if(o.is(":hidden")){r.fadeOut(t.fadetime);o.fadeIn(t.fadetime);n.removeClass("active");e(this).addClass("active");e(".caption").css("bottom","-37px");o.find(".caption").delay(300).animate({bottom:0},300)}})}function a(){setTimeout(function(){r.filter(":first-child").fadeOut(t.fadetime).next("li").fadeIn(t.fadetime).end().appendTo("#slideshow ul");r.each(function(){if(r.is(":visible")){e(".caption").css("bottom","-37px");e(this).find(".caption").delay(300).animate({bottom:0},300)}});a()},t.delay)}function f(){var n=e("#pagination li").first().children("a");var s;var o;e(document).ready(function u(){i=setTimeout(function(){s=e("#pagination li a.active");o=s.parent().next("li").children("a");if(!o.exists()){o=n}var i=e(o.attr("href"));if(i.is(":hidden")){r.fadeOut(t.fadetime);i.fadeIn(t.fadetime);s.removeClass("active");o.addClass("active");e(".caption").css("bottom","-37px");i.find(".caption").delay(300).animate({bottom:0},300)}u()},t.delay)})}var n=e(this);var r=n.find("ul li");var i;r.not(":first").hide();e.fn.exists=function(){return this.length!==0};n.width(t.width);n.find("ul, li img").width(t.width);n.height(t.height);n.find("ul, li").height(t.height);if(t.pagination===true){s();if(t.delay!==false){f()}}else{a()}o();u()})}})(jQuery)